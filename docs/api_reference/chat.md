# Chat
> Chat - a class for interacting with the chat with character.

## Methods


## async `fetch_history()`
> Returns the chat message history


| Parameters | Description |
| --- | --- |
| (*optional*) **page_num** : `int` = `None` | *page number* |

**Returns** `MessageHistory`

## async `get_histories()`
> Returns the list of chat histories with character

| Parameters | Description |
| --- | --- |
| (*optional*) **amount** : `int` = 50 | *number of histories* |

**Returns** `list` 

## async `start_new_chat()`
> Starts a new chat with character 

**Returns** `dict`


## async `send_to_character()`
> Sends request with payload to character
>
> ⚠️ It is recommended to use only if you know how to properly compose a payload. It is better to use `send_message()` and `another_response()` instead

| Parameters | Description |
| --- | --- |
| **options** : `dict` | *Payload. For example, `{"text": "Hello!", "primary_msg_uuid": "uuid"}` - Responds with "Hello!" to one of the alternate responses of the character (`"primary_msg_uuid"` is the uuid of the alternative message we are replying to)*

**Returns** `Reply`

## async `send_message()`
> Sends a message to character

| Parameters | Description |
| --- | --- |
| (*optional*) **text**: `str` | *Message Text* | 
| (*optional*) **primary_msg_uuid** : `str`| *Uuid of the message you are replying to (if there are multiple answer options)* |
| (*optional*) **image_path** : `str` | *link to the image uploaded to the Сharacter AI server. At the moment there is no option to upload your own image, but you can use a generated by character ( `generate_image()` )* |
| (*optional*) **image_description** : `str`| *A text description for the picture attached to the message. A good description will help the character understand the meaning and what is shown in the picture*|

**Returns** `Reply`


## async `another_response()`
> Generates an alternate character response

| Parameters | Description |
| --- | --- |
| **parent_msg_uuid** : `str` | *Uuid of the message to which the character is responding* |

**Returns** `Reply`


## async `generate_image()`
> Generates an image based on the `prompt`

| Parameters | Description |
| --- | --- |
| **prompt** : `str` | *Prompt for generating an image* |

**Returns** `str` (*link to the image on the Character AI server*)


## async `change_to_conversation()`
> Changes the current conversation to another

| Parameters | Description |
| --- | --- |
| **history_id** : `str` | *id of the history (`history_external_id`) to which you want to switch* |
| **force** : `bool` = `False` | *If True, it changes the id of the history, whether or not it exists. May raise an exception* |

**Returns** `bool`

## async `get_message()`

| Parameters | Description |
| --- | --- |
| **message_uuid** : `str` | *The uuid of the message you want to get* |

**Returns** `Message` | `None`

## async `get_following_messages()`
> Returns a list of all messages following the given one, including it

| Parameters | Description |
| --- | --- |
| **message_uuid** : `str` | *uuid of the start message* |
| **only_uuids** : `bool` = `True` | *if `True`, it returns a list of only messages `uuid`, and if `False`, it returns a list of messages*|

**Returns** `list[Message | str] | None`

## async `get_related_messages()`
> Returns a list of all messages related to the given message. Used to get a list of all the alternative responses of a character

| Parameters | Description |
| --- | --- |
| **message_uuid** : `str` | *uuid of the start message* |
| ** get_previous** : `bool` = `False` | *if True, adds the previous message to the list too* | 
| **only_uuids** : `bool` = `True` | *if `True`, it returns a list of only messages `uuid`, and if `False`, it returns a list of messages*|

**Returns** `list[Message | str] | None`


## async `get_parent_message()`
> Returns the parent message needed to generate an alternative response

| Parameters | Description |
| --- | --- |
| **message_uuid** : `str` | *uuid of the start message* |
| **only_uuids** : `bool` = `True` | *if `True`, it returns only the message `uuid`, and if `False`, it returns the `message`*|

**Returns** `Message | str | None`


## async `delete_messages()`
> Deletes messages by their uuid

| Parameters | Description |
| --- | --- |
| **message_uuids** : `list` | *List of uuid messages that you want to delete* |

**Returns** `bool`


## async `delete_message()`
> Deletes message by its uuid

| Parameters | Description |
| --- | --- |
| **message_uuid** : `str` | *uuid of the message you want to delete* |

**Returns** `bool`


## 📖:
- [Welcome](https://github.com/Xtr4F/PyCharacterAI/blob/main/docs/welcome.md) 
- [Getting started](https://github.com/Xtr4F/PyCharacterAI/blob/main/docs/getting_started.md)
- API Reference:
  - [Client](https://github.com/Xtr4F/PyCharacterAI/blob/main/docs/api_reference/client.md)
  - [Chat](https://github.com/Xtr4F/PyCharacterAI/blob/main/docs/api_reference/chat.md) <- `(You're here.)`
  - Messages:
    - [Message](https://github.com/Xtr4F/PyCharacterAI/blob/main/docs/api_reference/messages/message.md)
    - [Reply](https://github.com/Xtr4F/PyCharacterAI/blob/main/docs/api_reference/messages/reply.md)
    - [MessageHistory](https://github.com/Xtr4F/PyCharacterAI/blob/main/docs/api_reference/messages/message_history.md)